(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ui-system-monitor[data-v-bd43b538]{width:100%;height:100%}.monitor-card[data-v-bd43b538]{display:flex;flex-direction:column;gap:10px;height:100%;padding:10px;border:1px solid #d4deef;border-radius:8px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.monitor-header[data-v-bd43b538]{border-bottom:2px solid #17356e;padding-bottom:4px}.card-title[data-v-bd43b538]{color:#17356e;font-weight:700}.monitor-title[data-v-bd43b538]{font-size:14px}.cpu-grid[data-v-bd43b538]{display:grid;gap:3px 6px}.cpu-cell[data-v-bd43b538]{display:flex;align-items:center;gap:4px;min-width:0}.cpu-id[data-v-bd43b538]{width:34px;font-size:11px;color:#000000bf;text-transform:uppercase}.cpu-mini-bar[data-v-bd43b538]{position:relative;width:84px;height:10px;overflow:hidden;border-radius:6px;background:#00000014}.cpu-mini-fill[data-v-bd43b538]{position:absolute;top:0;left:0;bottom:0;border-radius:6px;transition:width .14s linear,background-color .14s linear}.cpu-mini-value[data-v-bd43b538]{width:28px;font-size:11px;text-align:right;color:#000000bf}.empty-text[data-v-bd43b538]{grid-column:1 / -1;font-size:12px;color:#000000a6}.bottom-grid[data-v-bd43b538]{display:grid;grid-template-columns:minmax(180px,1fr) minmax(180px,1fr);gap:10px}.panel[data-v-bd43b538]{display:flex;flex-direction:column;gap:6px;padding:8px;border:1px solid rgba(0,0,0,.12);border-radius:8px}.panel-title[data-v-bd43b538]{font-size:12px;font-weight:700;letter-spacing:.04em;text-transform:uppercase;color:#17356e}.meter-row[data-v-bd43b538]{display:flex;align-items:center;gap:8px}.meter-label[data-v-bd43b538]{width:52px;font-size:12px;text-transform:uppercase;color:#000000bf}.meter-bar[data-v-bd43b538]{position:relative;flex:1;height:10px;overflow:hidden;border-radius:6px;background:#00000014}.meter-fill[data-v-bd43b538]{position:absolute;top:0;left:0;bottom:0;border-radius:6px;transition:width .14s linear,background-color .14s linear}.meter-value[data-v-bd43b538]{width:42px;font-size:12px;text-align:right;color:#000000bf}.meter-detail[data-v-bd43b538]{min-width:84px;font-size:12px;text-align:right;color:#000000bf}.stat-row[data-v-bd43b538]{display:flex;justify-content:space-between;gap:8px;font-size:12px}.stat-label[data-v-bd43b538]{color:#000000a6}.stat-value[data-v-bd43b538]{color:#000000e6}@media (max-width: 960px){.cpu-mini-bar[data-v-bd43b538]{width:70px}}@media (max-width: 780px){.cpu-mini-bar[data-v-bd43b538]{width:56px}.cpu-id[data-v-bd43b538]{width:30px}}@media (max-width: 680px){.bottom-grid[data-v-bd43b538]{grid-template-columns:1fr}}")),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(c,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],e):(c=typeof globalThis<"u"?globalThis:c||self,e(c["ui-system-monitor"]={},c.Vue,c.vuex))})(this,function(c,e,B){"use strict";const $=(p,l)=>{const d=p.__vccOpts||p;for(const[a,_]of l)d[a]=_;return d},x={class:"ui-system-monitor"},M={class:"monitor-header card-title"},D={class:"monitor-title"},P={class:"cpu-id"},T={class:"cpu-mini-bar"},A={class:"cpu-mini-value"},C={key:1,class:"empty-text"},U={class:"bottom-grid"},j={class:"panel"},L={class:"meter-row"},z={class:"meter-bar"},F={class:"meter-value"},q={class:"meter-detail"},G={class:"meter-row"},I={class:"meter-bar"},O={class:"meter-value"},W={class:"meter-detail"},v={class:"panel"},K={class:"stat-row"},R={class:"stat-value"},H={class:"stat-row"},J={class:"stat-value"},Q={class:"stat-row"},X={class:"stat-value"},Y={class:"stat-row"},Z={class:"stat-value"},ee=$({__name:"SystemMonitor",props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})}},setup(p){const l=p,d=B.useStore(),a=e.inject("$socket",null),_=e.computed(()=>{var t;return((t=l.props)==null?void 0:t.name)||"system-monitor"}),h=e.computed(()=>{var t,s,n;return((n=(s=(t=d.state)==null?void 0:t.data)==null?void 0:s.messages)==null?void 0:n[l.id])||null}),r=e.computed(()=>{var t,s;return((s=(t=h.value)==null?void 0:t.payload)==null?void 0:s.cpu)||null}),V=e.computed(()=>{var t,s;return((s=(t=h.value)==null?void 0:t.payload)==null?void 0:s.memory)||null}),u=e.computed(()=>{var t;return((t=V.value)==null?void 0:t.ram)||null}),f=e.computed(()=>{var t;return((t=V.value)==null?void 0:t.swap)||null}),b=e.computed(()=>{var t;return((t=u.value)==null?void 0:t.usedPercent)??null}),S=e.computed(()=>{var t;return((t=f.value)==null?void 0:t.usedPercent)??null}),te=e.computed(()=>{var t;return((t=r.value)==null?void 0:t.tasks)??"-"}),se=e.computed(()=>{var t;return((t=r.value)==null?void 0:t.threads)??"-"}),ne=e.computed(()=>{var t;return pe((t=r.value)==null?void 0:t.loadAvg)}),oe=e.computed(()=>{var t;return me((t=r.value)==null?void 0:t.uptimeSec)}),le=e.computed(()=>u.value?`${y(u.value.usedBytes)} / ${y(u.value.totalBytes)}`:"-"),ae=e.computed(()=>f.value?`${y(f.value.usedBytes)} / ${y(f.value.totalBytes)}`:"-"),N=e.computed(()=>{var n,o;const t=[];typeof((n=r.value)==null?void 0:n.overall)=="number"&&!Number.isNaN(r.value.overall)&&t.push({key:"avg",label:"AVG",percent:r.value.overall});const s=Array.isArray((o=r.value)==null?void 0:o.cores)?r.value.cores:[];for(let i=0;i<s.length;i+=1)t.push({key:`core-${i}`,label:`${i}`,percent:s[i]});return t}),re=e.computed(()=>ue(N.value.length)),ie=e.computed(()=>({gridTemplateColumns:`repeat(${re.value}, minmax(0, 1fr))`}));function k(t){t&&d.commit("data/bind",{widgetId:l.id,msg:t})}function ce(){if(!a)return;const t=`widget-load:${l.id}`,s=`msg-input:${l.id}`;a.on(t,n=>{k(n)}),a.on(s,n=>{k(n)}),a.emit("widget-load",l.id)}e.onMounted(()=>{ce()}),e.onBeforeUnmount(()=>{a&&(a.off(`widget-load:${l.id}`),a.off(`msg-input:${l.id}`))});function w(t){return typeof t!="number"||Number.isNaN(t)?null:Math.max(0,Math.min(100,t))}function g(t){const s=w(t);return s===null?"-":`${s.toFixed(0)}%`}function E(t){const s=w(t);return{width:s===null?"0%":`${s}%`,opacity:s===null?.2:1,backgroundColor:de(s)}}function de(t){return t===null?"rgba(0, 0, 0, 0.18)":t<50?"#2ca7ff":t<70?"#f1c40f":t<85?"#f39c12":"#e74c3c"}function me(t){if(t==null||Number.isNaN(t))return"-";let s=Math.floor(t);const n=Math.floor(s/86400);s-=n*86400;const o=Math.floor(s/3600);s-=o*3600;const i=Math.floor(s/60),m=[];return n&&m.push(`${n}d`),(o||m.length)&&m.push(`${o}h`),m.push(`${i}m`),m.join(" ")}function pe(t){return!Array.isArray(t)||t.length<3?"-":t.slice(0,3).map(s=>Number(s).toFixed(2)).join(" ")}function y(t){if(typeof t!="number"||Number.isNaN(t)||t<0)return"-";if(t===0)return"0 B";const s=["B","KiB","MiB","GiB","TiB"];let n=t,o=0;for(;n>=1024&&o<s.length-1;)n/=1024,o+=1;const i=n>=10||o===0?0:1;return`${n.toFixed(i)} ${s[o]}`}function ue(t){return t<=2?t||1:t<=8?4:t<=16?6:t<=32?8:10}return(t,s)=>{const n=e.resolveComponent("v-card");return e.openBlock(),e.createElementBlock("div",x,[e.createVNode(n,{class:"monitor-card bg-white",elevation:"0"},{default:e.withCtx(()=>[e.createElementVNode("div",M,[e.createElementVNode("span",D,e.toDisplayString(_.value),1)]),e.createElementVNode("div",{class:"cpu-grid",style:e.normalizeStyle(ie.value)},[N.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(N.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.key,class:"cpu-cell"},[e.createElementVNode("span",P,e.toDisplayString(o.label),1),e.createElementVNode("div",T,[e.createElementVNode("div",{class:"cpu-mini-fill",style:e.normalizeStyle(E(o.percent))},null,4)]),e.createElementVNode("span",A,e.toDisplayString(g(o.percent)),1)]))),128)):(e.openBlock(),e.createElementBlock("div",C,"Waiting for CPU data..."))],4),e.createElementVNode("div",U,[e.createElementVNode("div",j,[s[2]||(s[2]=e.createElementVNode("div",{class:"panel-title"},"Memory",-1)),e.createElementVNode("div",L,[s[0]||(s[0]=e.createElementVNode("span",{class:"meter-label"},"RAM",-1)),e.createElementVNode("div",z,[e.createElementVNode("div",{class:"meter-fill",style:e.normalizeStyle(E(b.value))},null,4)]),e.createElementVNode("span",F,e.toDisplayString(g(b.value)),1),e.createElementVNode("span",q,e.toDisplayString(le.value),1)]),e.createElementVNode("div",G,[s[1]||(s[1]=e.createElementVNode("span",{class:"meter-label"},"SWAP",-1)),e.createElementVNode("div",I,[e.createElementVNode("div",{class:"meter-fill",style:e.normalizeStyle(E(S.value))},null,4)]),e.createElementVNode("span",O,e.toDisplayString(g(S.value)),1),e.createElementVNode("span",W,e.toDisplayString(ae.value),1)])]),e.createElementVNode("div",v,[s[7]||(s[7]=e.createElementVNode("div",{class:"panel-title"},"CPU Stats",-1)),e.createElementVNode("div",K,[s[3]||(s[3]=e.createElementVNode("span",{class:"stat-label"},"Tasks",-1)),e.createElementVNode("span",R,e.toDisplayString(te.value),1)]),e.createElementVNode("div",H,[s[4]||(s[4]=e.createElementVNode("span",{class:"stat-label"},"Threads",-1)),e.createElementVNode("span",J,e.toDisplayString(se.value),1)]),e.createElementVNode("div",Q,[s[5]||(s[5]=e.createElementVNode("span",{class:"stat-label"},"Load Avg",-1)),e.createElementVNode("span",X,e.toDisplayString(ne.value),1)]),e.createElementVNode("div",Y,[s[6]||(s[6]=e.createElementVNode("span",{class:"stat-label"},"Uptime",-1)),e.createElementVNode("span",Z,e.toDisplayString(oe.value),1)])])])]),_:1})])}}},[["__scopeId","data-v-bd43b538"]]);c.SystemMonitor=ee,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
