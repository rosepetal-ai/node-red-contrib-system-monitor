(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".ui-system-monitor[data-v-746538fc]{width:100%;height:100%}.monitor-card[data-v-746538fc]{display:flex;flex-direction:column;gap:10px;height:100%;padding:10px;border:1px solid #d4deef;border-radius:8px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.monitor-header[data-v-746538fc]{border-bottom:2px solid #17356e;padding-bottom:4px}.card-title[data-v-746538fc]{color:#17356e;font-weight:700}.monitor-title[data-v-746538fc]{font-size:14px}.cpu-grid[data-v-746538fc]{display:grid;gap:3px 6px}.cpu-cell[data-v-746538fc]{display:flex;align-items:center;gap:4px;min-width:0}.cpu-id[data-v-746538fc]{width:34px;font-size:11px;color:#000000bf;text-transform:uppercase}.cpu-mini-bar[data-v-746538fc]{position:relative;width:84px;height:10px;overflow:hidden;border-radius:6px;background:#00000014}.cpu-mini-fill[data-v-746538fc]{position:absolute;top:0;left:0;bottom:0;border-radius:6px;transition:width .14s linear,background-color .14s linear}.cpu-mini-value[data-v-746538fc]{width:28px;font-size:11px;text-align:right;color:#000000bf}.empty-text[data-v-746538fc]{grid-column:1 / -1;font-size:12px;color:#000000a6}.bottom-grid[data-v-746538fc]{display:grid;grid-template-columns:minmax(180px,1fr) minmax(180px,1fr);gap:10px}.panel[data-v-746538fc]{display:flex;flex-direction:column;gap:6px;padding:8px;border:1px solid rgba(0,0,0,.12);border-radius:8px}.panel-title[data-v-746538fc]{font-size:12px;font-weight:700;letter-spacing:.04em;text-transform:uppercase;color:#17356e}.meter-row[data-v-746538fc]{display:flex;align-items:center;gap:8px}.meter-label[data-v-746538fc]{width:52px;font-size:12px;text-transform:uppercase;color:#000000bf}.meter-bar[data-v-746538fc]{position:relative;flex:1;height:10px;overflow:hidden;border-radius:6px;background:#00000014}.meter-fill[data-v-746538fc]{position:absolute;top:0;left:0;bottom:0;border-radius:6px;transition:width .14s linear,background-color .14s linear}.meter-value[data-v-746538fc]{width:42px;font-size:12px;text-align:right;color:#000000bf}.meter-detail[data-v-746538fc]{min-width:84px;font-size:12px;text-align:right;color:#000000bf}.stat-row[data-v-746538fc]{display:flex;justify-content:space-between;gap:8px;font-size:12px}.stat-label[data-v-746538fc]{color:#000000a6}.stat-value[data-v-746538fc]{color:#000000e6}.disk-panel[data-v-746538fc]{gap:8px}.io-grid[data-v-746538fc]{display:grid;grid-template-columns:minmax(280px,1fr) minmax(280px,1fr);gap:10px}.disk-table[data-v-746538fc]{display:flex;flex-direction:column;gap:2px}.disk-row[data-v-746538fc]{display:grid;grid-template-columns:minmax(100px,1.8fr) 52px minmax(110px,1.5fr) 72px 72px 72px;align-items:center;gap:6px;min-height:24px;font-size:11px}.disk-head[data-v-746538fc]{font-size:11px;text-transform:uppercase;letter-spacing:.03em;color:#0009}.disk-col[data-v-746538fc]{min-width:0}.disk-col.mount[data-v-746538fc]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.disk-col.fs[data-v-746538fc],.disk-col.free[data-v-746538fc],.disk-col.rate[data-v-746538fc]{color:#000000c7}.used-col[data-v-746538fc]{display:flex;align-items:center;gap:6px}.disk-used-bar[data-v-746538fc]{position:relative;flex:1;height:8px;border-radius:6px;overflow:hidden;background:#00000014}.disk-used-fill[data-v-746538fc]{position:absolute;top:0;left:0;bottom:0;border-radius:6px;transition:width .14s linear,background-color .14s linear}.disk-used-pct[data-v-746538fc]{width:38px;text-align:right;color:#000000c7}.network-panel[data-v-746538fc]{gap:8px}.network-table[data-v-746538fc]{display:flex;flex-direction:column;gap:2px}.network-row[data-v-746538fc]{display:grid;grid-template-columns:minmax(70px,1.2fr) 44px 74px 74px 74px 74px;align-items:center;gap:6px;min-height:24px;font-size:11px}.network-head[data-v-746538fc]{font-size:10px;text-transform:uppercase;letter-spacing:.03em;color:#0009}.net-col[data-v-746538fc]{min-width:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.net-col.rate[data-v-746538fc],.net-col.total[data-v-746538fc],.net-col.state[data-v-746538fc]{color:#000000c7}.state-up[data-v-746538fc]{color:#0d8f39}.state-down[data-v-746538fc]{color:#c23b22}@media (max-width: 960px){.cpu-mini-bar[data-v-746538fc]{width:70px}}@media (max-width: 780px){.cpu-mini-bar[data-v-746538fc]{width:56px}.cpu-id[data-v-746538fc]{width:30px}}@media (max-width: 680px){.bottom-grid[data-v-746538fc],.io-grid[data-v-746538fc]{grid-template-columns:1fr}.disk-row[data-v-746538fc]{grid-template-columns:minmax(90px,1.6fr) 44px minmax(96px,1.4fr) 64px 64px 64px;gap:6px;font-size:10px}.disk-head[data-v-746538fc]{font-size:10px}.network-row[data-v-746538fc]{grid-template-columns:minmax(70px,1.2fr) 40px 64px 64px 64px 64px;font-size:10px}.network-head[data-v-746538fc]{font-size:9px}}")),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i["ui-system-monitor"]={},i.Vue,i.vuex))})(this,function(i,e,T){"use strict";const A=(f,l)=>{const m=f.__vccOpts||f;for(const[a,V]of l)m[a]=V;return m},P={class:"ui-system-monitor"},U={class:"monitor-header card-title"},C={class:"monitor-title"},F={class:"cpu-id"},L={class:"cpu-mini-bar"},z={class:"cpu-mini-value"},j={key:1,class:"empty-text"},I={class:"bottom-grid"},W={class:"panel"},R={class:"meter-row"},q={class:"meter-bar"},G={class:"meter-value"},O={class:"meter-detail"},K={class:"meter-row"},H={class:"meter-bar"},J={class:"meter-value"},Q={class:"meter-detail"},X={class:"panel"},Y={class:"stat-row"},Z={class:"stat-value"},v={class:"stat-row"},ee={class:"stat-value"},te={class:"stat-row"},se={class:"stat-value"},oe={class:"stat-row"},ne={class:"stat-value"},le={class:"io-grid"},ae={class:"panel disk-panel"},re={key:0,class:"disk-table"},ce=["title"],ie={class:"disk-col fs"},de={class:"disk-col used used-col"},me={class:"disk-used-bar"},pe={class:"disk-used-pct"},fe={class:"disk-col free"},Ne={class:"disk-col rate"},_e={class:"disk-col rate"},ye={key:1,class:"empty-text"},Ee={class:"panel network-panel"},ke={key:0,class:"network-table"},ue={class:"net-col iface"},Ve={class:"net-col rate"},ge={class:"net-col rate"},he={class:"net-col total"},Be={class:"net-col total"},Se={key:1,class:"empty-text"},we=A({__name:"SystemMonitor",props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})}},setup(f){const l=f,m=T.useStore(),a=e.inject("$socket",null),V=e.computed(()=>{var t;return((t=l.props)==null?void 0:t.name)||"Usage / core"}),N=e.computed(()=>{var t,s,n;return((n=(s=(t=m.state)==null?void 0:t.data)==null?void 0:s.messages)==null?void 0:n[l.id])||null}),r=e.computed(()=>{var t,s;return((s=(t=N.value)==null?void 0:t.payload)==null?void 0:s.cpu)||null}),h=e.computed(()=>{var t,s;return((s=(t=N.value)==null?void 0:t.payload)==null?void 0:s.memory)||null}),B=e.computed(()=>{var t,s;return((s=(t=N.value)==null?void 0:t.payload)==null?void 0:s.disk)||null}),S=e.computed(()=>{var t,s;return((s=(t=N.value)==null?void 0:t.payload)==null?void 0:s.network)||null}),_=e.computed(()=>{var t;return((t=h.value)==null?void 0:t.ram)||null}),y=e.computed(()=>{var t;return((t=h.value)==null?void 0:t.swap)||null}),w=e.computed(()=>{var t;return((t=_.value)==null?void 0:t.usedPercent)??null}),b=e.computed(()=>{var t;return((t=y.value)==null?void 0:t.usedPercent)??null}),be=e.computed(()=>{var t;return((t=r.value)==null?void 0:t.tasks)??"-"}),xe=e.computed(()=>{var t;return((t=r.value)==null?void 0:t.threads)??"-"}),De=e.computed(()=>{var t;return Le((t=r.value)==null?void 0:t.loadAvg)}),$e=e.computed(()=>{var t;return Fe((t=r.value)==null?void 0:t.uptimeSec)}),Me=e.computed(()=>_.value?`${d(_.value.usedBytes)} / ${d(_.value.totalBytes)}`:"-"),Te=e.computed(()=>y.value?`${d(y.value.usedBytes)} / ${d(y.value.totalBytes)}`:"-"),x=e.computed(()=>{var s;return Array.isArray((s=B.value)==null?void 0:s.items)?B.value.items:[]}),D=e.computed(()=>{var s;return Array.isArray((s=S.value)==null?void 0:s.items)?S.value.items:[]}),g=e.computed(()=>{var n,o;const t=[];typeof((n=r.value)==null?void 0:n.overall)=="number"&&!Number.isNaN(r.value.overall)&&t.push({key:"avg",label:"AVG",percent:r.value.overall});const s=Array.isArray((o=r.value)==null?void 0:o.cores)?r.value.cores:[];for(let c=0;c<s.length;c+=1)t.push({key:`core-${c}`,label:`${c}`,percent:s[c]});return t}),Ae=e.computed(()=>ze(g.value.length)),Pe=e.computed(()=>({gridTemplateColumns:`repeat(${Ae.value}, minmax(0, 1fr))`}));function $(t){t&&m.commit("data/bind",{widgetId:l.id,msg:t})}function Ue(){if(!a)return;const t=`widget-load:${l.id}`,s=`msg-input:${l.id}`;a.on(t,n=>{$(n)}),a.on(s,n=>{$(n)}),a.emit("widget-load",l.id)}e.onMounted(()=>{Ue()}),e.onBeforeUnmount(()=>{a&&(a.off(`widget-load:${l.id}`),a.off(`msg-input:${l.id}`))});function M(t){return typeof t!="number"||Number.isNaN(t)?null:Math.max(0,Math.min(100,t))}function E(t){const s=M(t);return s===null?"-":`${s.toFixed(0)}%`}function k(t){const s=M(t);return{width:s===null?"0%":`${s}%`,opacity:s===null?.2:1,backgroundColor:Ce(s)}}function Ce(t){return t===null?"rgba(0, 0, 0, 0.18)":t<50?"#2ca7ff":t<70?"#f1c40f":t<85?"#f39c12":"#e74c3c"}function Fe(t){if(t==null||Number.isNaN(t))return"-";let s=Math.floor(t);const n=Math.floor(s/86400);s-=n*86400;const o=Math.floor(s/3600);s-=o*3600;const c=Math.floor(s/60),p=[];return n&&p.push(`${n}d`),(o||p.length)&&p.push(`${o}h`),p.push(`${c}m`),p.join(" ")}function Le(t){return!Array.isArray(t)||t.length<3?"-":t.slice(0,3).map(s=>Number(s).toFixed(2)).join(" ")}function d(t){if(typeof t!="number"||Number.isNaN(t)||t<0)return"-";if(t===0)return"0 B";const s=["B","KiB","MiB","GiB","TiB"];let n=t,o=0;for(;n>=1024&&o<s.length-1;)n/=1024,o+=1;const c=n>=10||o===0?0:1;return`${n.toFixed(c)} ${s[o]}`}function u(t){return typeof t!="number"||Number.isNaN(t)||t<0?"-":`${d(t)}/s`}function ze(t){return t<=2?t||1:t<=8?4:t<=16?6:t<=32?8:10}return(t,s)=>{const n=e.resolveComponent("v-card");return e.openBlock(),e.createElementBlock("div",P,[e.createVNode(n,{class:"monitor-card bg-white",elevation:"0"},{default:e.withCtx(()=>[e.createElementVNode("div",U,[e.createElementVNode("span",C,e.toDisplayString(V.value),1)]),e.createElementVNode("div",{class:"cpu-grid",style:e.normalizeStyle(Pe.value)},[g.value.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(g.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.key,class:"cpu-cell"},[e.createElementVNode("span",F,e.toDisplayString(o.label),1),e.createElementVNode("div",L,[e.createElementVNode("div",{class:"cpu-mini-fill",style:e.normalizeStyle(k(o.percent))},null,4)]),e.createElementVNode("span",z,e.toDisplayString(E(o.percent)),1)]))),128)):(e.openBlock(),e.createElementBlock("div",j,"Waiting for CPU data..."))],4),e.createElementVNode("div",I,[e.createElementVNode("div",W,[s[2]||(s[2]=e.createElementVNode("div",{class:"panel-title"},"Memory",-1)),e.createElementVNode("div",R,[s[0]||(s[0]=e.createElementVNode("span",{class:"meter-label"},"RAM",-1)),e.createElementVNode("div",q,[e.createElementVNode("div",{class:"meter-fill",style:e.normalizeStyle(k(w.value))},null,4)]),e.createElementVNode("span",G,e.toDisplayString(E(w.value)),1),e.createElementVNode("span",O,e.toDisplayString(Me.value),1)]),e.createElementVNode("div",K,[s[1]||(s[1]=e.createElementVNode("span",{class:"meter-label"},"SWAP",-1)),e.createElementVNode("div",H,[e.createElementVNode("div",{class:"meter-fill",style:e.normalizeStyle(k(b.value))},null,4)]),e.createElementVNode("span",J,e.toDisplayString(E(b.value)),1),e.createElementVNode("span",Q,e.toDisplayString(Te.value),1)])]),e.createElementVNode("div",X,[s[7]||(s[7]=e.createElementVNode("div",{class:"panel-title"},"CPU Stats",-1)),e.createElementVNode("div",Y,[s[3]||(s[3]=e.createElementVNode("span",{class:"stat-label"},"Tasks",-1)),e.createElementVNode("span",Z,e.toDisplayString(be.value),1)]),e.createElementVNode("div",v,[s[4]||(s[4]=e.createElementVNode("span",{class:"stat-label"},"Threads",-1)),e.createElementVNode("span",ee,e.toDisplayString(xe.value),1)]),e.createElementVNode("div",te,[s[5]||(s[5]=e.createElementVNode("span",{class:"stat-label"},"Load Avg",-1)),e.createElementVNode("span",se,e.toDisplayString(De.value),1)]),e.createElementVNode("div",oe,[s[6]||(s[6]=e.createElementVNode("span",{class:"stat-label"},"Uptime",-1)),e.createElementVNode("span",ne,e.toDisplayString($e.value),1)])])]),e.createElementVNode("div",le,[e.createElementVNode("div",ae,[s[9]||(s[9]=e.createElementVNode("div",{class:"panel-title"},"Disk",-1)),x.value.length?(e.openBlock(),e.createElementBlock("div",re,[s[8]||(s[8]=e.createElementVNode("div",{class:"disk-row disk-head"},[e.createElementVNode("span",{class:"disk-col mount"},"Mount"),e.createElementVNode("span",{class:"disk-col fs"},"FS"),e.createElementVNode("span",{class:"disk-col used"},"Used"),e.createElementVNode("span",{class:"disk-col free"},"Free"),e.createElementVNode("span",{class:"disk-col rate"},"Read/s"),e.createElementVNode("span",{class:"disk-col rate"},"Write/s")],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.id,class:"disk-row"},[e.createElementVNode("span",{class:"disk-col mount",title:o.source},e.toDisplayString(o.mountPoint),9,ce),e.createElementVNode("span",ie,e.toDisplayString(o.fsType),1),e.createElementVNode("div",de,[e.createElementVNode("div",me,[e.createElementVNode("div",{class:"disk-used-fill",style:e.normalizeStyle(k(o.usedPercent))},null,4)]),e.createElementVNode("span",pe,e.toDisplayString(E(o.usedPercent)),1)]),e.createElementVNode("span",fe,e.toDisplayString(d(o.freeBytes)),1),e.createElementVNode("span",Ne,e.toDisplayString(u(o.readBps)),1),e.createElementVNode("span",_e,e.toDisplayString(u(o.writeBps)),1)]))),128))])):(e.openBlock(),e.createElementBlock("div",ye,"Waiting for disk data..."))]),e.createElementVNode("div",Ee,[s[11]||(s[11]=e.createElementVNode("div",{class:"panel-title"},"Network",-1)),D.value.length?(e.openBlock(),e.createElementBlock("div",ke,[s[10]||(s[10]=e.createElementVNode("div",{class:"network-row network-head"},[e.createElementVNode("span",{class:"net-col iface"},"Iface"),e.createElementVNode("span",{class:"net-col state"},"State"),e.createElementVNode("span",{class:"net-col rate"},"Down/s"),e.createElementVNode("span",{class:"net-col rate"},"Up/s"),e.createElementVNode("span",{class:"net-col total"},"Rx Total"),e.createElementVNode("span",{class:"net-col total"},"Tx Total")],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(D.value,o=>(e.openBlock(),e.createElementBlock("div",{key:o.iface,class:"network-row"},[e.createElementVNode("span",ue,e.toDisplayString(o.iface),1),e.createElementVNode("span",{class:e.normalizeClass(["net-col state",o.state==="up"?"state-up":"state-down"])},e.toDisplayString(o.state),3),e.createElementVNode("span",Ve,e.toDisplayString(u(o.rxBps)),1),e.createElementVNode("span",ge,e.toDisplayString(u(o.txBps)),1),e.createElementVNode("span",he,e.toDisplayString(d(o.rxBytes)),1),e.createElementVNode("span",Be,e.toDisplayString(d(o.txBytes)),1)]))),128))])):(e.openBlock(),e.createElementBlock("div",Se,"Waiting for network data..."))])])]),_:1})])}}},[["__scopeId","data-v-746538fc"]]);i.SystemMonitor=we,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
